{
  # Aggregation can also be done based on a filter criteria
  # When using filter argument, aggregations will be performed only on documents which satisfy the filter critera
  agentSession(from: 1644859375000, to: 1671038575000
    filter : {
        isActive : {equals : true}
    }
    aggregations : [
        {
            field : "agentId"
            name : "Agents handling telephony tasks" 
            type : cardinality
            filter : {
                channelInfo : {
                    channelType : {equals : "telephony"}
                }
            }
        }
        {
            field : "agentId"
            name : "Agents handling social tasks" 
            type : cardinality
            filter : {
                channelInfo : {
                    channelType : {equals : "social"}
                }
            }
        }
        {
            field : "agentId"
            name : "idle Agents" 
            type : cardinality
            filter : {
                channelInfo : {
                    currentState : {equals : idle}
                }
            }
        }
        {
            field : "agentId"
            name : "Number of Agents in connected state" 
            type : cardinality
            filter : {
                channelInfo : {
                    currentState : {equals : connected}
                }
            }
        }
    ]
) {
    agentSessions {
        aggregation {
            name
            value
        }
    }
  }
}
